---
title: "ヒートベッドの設定"
permalink: /make3d/heat-bed-setting/
toc: true
---
【アクセサリーとして発売している「ヒートベッドセット」を購入された方のためのマニュアルです。】

ヒートベッドの取り付けでは、ヒートベッドの組み立て、取り付け、動作確認を行いました。ここでは、ソフトウェアを中心に設定を行います。

設定項目は以下となります。

- 高さ調整
- PID値の調整
- キャリブレーションの設定
- プリント

それでは、最初に高さ調整を行います。
ヒートベッドを用いることでベッドの高さが11mm程度高くなります。その点を考慮しながら、動作確認および初期設定の「３）Z軸のゼロ点調整」を行います。

つぎに、ヒートベッドのPID値の調整を行います。動作確認および初期設定の「５）PIDの調整」と同じ要領ですが、実行するコマンドとファームウェアの変更箇所が少し異なります。

PronterfaceをKossel Mini EBに接続した状態にします。画面右下のフィールドに「M303 E-1 S60 C8」と入力して「Send」ボタンを押します。ヒートベッドの温度が上昇し、60℃付近でKp、Ki、Kpの値が６回ほど測定されます。測定値はフィールドの上部に表示されます。

<figure>
  <img src="{{ '/assets/images/make3d/602/602-1.webp' | relative_url }}" alt="602-1">
</figure>

６回測定された、Kp、Ki、Kdの値の平均値を算出します。エクセルなどのスプレッドシートを使用すると簡単です。
 
「Disconnect」ボタンを押して、Pronterfaceの接続を切ります。Arduino Softwareを起動して、Marlin.inoを開きます。Configuration.hを表示させます。267行目のから269行目までの「DEFAULT_bedKp」、「DEFAULT_bedKi」、「DEFAULT_bedKd」の値を算出した平均値で置き換えます。ファームウェアの書き換えを行えば終了です。

<figure>
  <img src="{{ '/assets/images/make3d/602/602-2.webp' | relative_url }}" alt="602-2">
</figure>

つぎに、キャリブレーションの設定を行います。ヒートベッド取り付け前にきちんと設定ができていれば、Z軸の高さは大きくずれることはありません。ここでは、プローブの収納で使用するリトラクターの位置を変更します。

ヒートベッドを設置したことにより、プローブ収納の位置を奥側（Z軸アルミフレーム側）に移動させる必要があります。また、沈み込みの高さも変更する必要があります。Arduino Softwareから、Marlin_main.cppファイルを開きます。1066行目から1068行目の値がプローブ収納を実行する位置情報になりますので、この値を変更します。例えば、奥側へ11mm移動させたい場合は、1067行目のY_AXISの値を59から70に変更します。これらの設定は個々のKossel Mini EBで若干異なりますので、調度良い位置となるように調整してください。

※ベッドから大きく離れた位置に設定すると、ロッドがベルトに当たったりしますので注意が必要です。

<figure>
  <img src="{{ '/assets/images/make3d/602/602-3.webp' | relative_url }}" alt="602-3">
</figure>

値の変更後ファームウェアを書き換え、PronterfaceからG29コマンドを実行してキャリブレーションを行います。最終的に止まった位置のプローブの真下にリトラクターの円柱がくるように設置し、ボルトを締めます。

再度キャリブレーションを実行すると、プローブがリトラクターに当たらないか、もしくは当たりが弱い状態になっています。つぎに、このプローブの沈み込み量を調整します。Arduino Softwareから、Marlin_main.cppファイルを開きます。1078行目の最後の値（下図では25）が沈み込み量になります。この値を少しずつ増やしていき、ちょうどプローブが収納される位置を見つけて設定します。

※いきなり大きな値にすると沈み込み過ぎて、Zプローブ自体が破損する場合がありますので注意が必要です。

<figure>
  <img src="{{ '/assets/images/make3d/602/602-4.webp' | relative_url }}" alt="602-4">
</figure>

キャリブレーションの設定が終われば、プリントを実行して最終確認を行います。Kisslicerのベッド温度を設定してGCodeを出力します。ベッド温度の最適値は、造形物の素材やフィラメントなどにより異なりますが、例えば当方ではPLAが60℃、ABSが80℃で設定しています。

下図は、PLAを使用してプリントした写真です（ホットエンド190℃、ヒートベッド60℃）。

<figure>
  <img src="{{ '/assets/images/make3d/602/602-5.webp' | relative_url }}" alt="602-5">
</figure>

下図は、ABSを使用してプリントした写真です（ホットエンド226℃、ヒートベッド80℃）。

<figure>
  <img src="{{ '/assets/images/make3d/602/602-6.webp' | relative_url }}" alt="602-6">
</figure>

（小さいモデルなので、もともと反りにくいとは思います。）
