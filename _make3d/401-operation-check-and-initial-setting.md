---
title: "動作確認および初期設定"
permalink: /make3d/operation-check-and-initial-setting/
toc: true
---
ここでは以下のことを行います。

1. ホットエンドのヒーターの動作確認
1. モーターの動作確認
1. Z軸のゼロ点調整
1. フィラメントの設置とノズルからの吐出確認
1. PID値の調整

【補足】：潤滑油を使ってスムーズにプリントする方法

## １．ホットエンドのヒーターの動作確認

3Dプリンターのコントローラー「Pronterface」を使用して、Kossel Mini EBの動作確認をします。また、「Arduino Software」を使って初期設定をします。

Kossel Mini EBを電源に接続します。LCDパネルに文字が表示されている事と、ホットエンドのファンが回っている事を確認します。

簡単にLCD画面の説明をします。

-  １行目：ホットエンドの現在の温度／ホットエンドの設定温度、ヒートベッドの現在の温度／ヒートベッドの設定温度※
- ２行目：X位置、Y位置、Z位置
- ３行目：フィードレート、完成率、経過時間
- ４行目：メッセージ

※ヒートベッドは使用していません。

また、LCDパネル右側にあるツマミを押したり回したりすることで、LCD画面の表示が変わり、詳細情報を表示させたり、マニュアル操作を行ったりすることができます。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-1.webp' | relative_url }}" alt="401-1">
</figure>

次にKossel Mini EBのUSBケーブルをPCに接続し、「Pronterface」を起動します。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-2.webp' | relative_url }}" alt="401-2">
</figure>

「Connect」ボタンを押してKossel Mini EBに接続します。

画面中央下側にグラフがあります。これはホットエンドのノズル付近の温度を示しています。室温が表示されている事を確認して下さい。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-3.webp' | relative_url }}" alt="401-3">
</figure>

「Heat」の値が「0(off)」となっています。これを「200.0」に設定して、右横の「Set」ボタンを押します。ヒーターが加熱され、ノズルの温度が上がります。ノズル付近から、若干焼けたニオイがしますが、特に問題はありません。グラフの温度が上がり200℃付近で一定になることを確認して下さい。

注意：ホットエンド、特にノズルは非常に高い温度になりますので、やけどしないように細心の注意を払って下さい。
{: .notice--warning} 

確認が終わったら、「Heat」の右側にある「Off」ボタンを押してヒーターを止めます。グラフより温度が下がっていくことを確認します。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-4.webp' | relative_url }}" alt="401-4">
</figure>

注意：電源を切る（電源を抜く）場合は、ホットエンドの温度が室温近くまで下がっている事を必ず確認して下さい。ホットエンドが高温のまま電源を切ると、ホットエンドファンも切れるため、チューブが溶けてノズルが詰まってしまう場合があります。
{: .notice--warning} 

## ２．モーターの動作確認

ここでは、引き続きモーターを動かします。
画面右下に入力フィールドがあり、その右側に「Send」ボタンがあります。これは数値制御（NC制御）を実行するGCodeを入力するためのフィールドになります。3Dプリンターの基本的な操作は画面左側のパネルでも可能ですが、それ以外の操作を行う場合はGCodeを使って操作することになります。3Dプリンターで使うGCodeについては、以下のサイトに簡単な説明があります。

[http://reprap.org/wiki/G-code/ja](http://reprap.org/wiki/G-code/ja){:target="_blank"}

操作を行う前に、Kossel Mini EBのLCDパネルの右下に「stop」ボタンがありますので、すぐに押せるように確認しておきます。モーターケーブルの接続が逆だった場合など、3Dプリンターが予期せぬ動きをする場合があります。その場合はこの「stop」ボタンを押して止めます。

注意：3Dプリンターの動作を手などで止めることはできません。モーターの力は人の力より数段強いので、止まるどころか怪我をしてしまいます。予期しない動きをした場合、決して慌てないで「stop」ボタンを押して下さい。間に合わなくても、怪我をするより壊れた部品を交換するほうがはるかに賢い選択です。
{: .notice--warning} 

フィールドに「G28」と入力して「Send」ボタンを押します（またはキーボードのEnterキーを押します）。３つのキャリッジすべてが上昇して、マイクロスイッチに当たります。このスイッチが入ることにより、モーターが停止します。もし下降するキャリッジがある場合、モーターケーブルのコネクターが逆に接続されている可能性があります。

## ３．Z軸のゼロ点調整

Kossel Mini EBの電源を入れた直後の3Dプリンターは、ホットエンド（ノズル）の位置情報を持っていません。「G28」コードを実行することで、位置情報が確定し、3Dプリンター装置内に記憶されます。「G28」実行直後のノズル先端位置は、X:0, Y:0, Z:(設定ファイルで指定されたベッドとノズル先端の距離)となります。ノズルの位置情報を表示させるには、フィールドに「M114」と入力して「Send」ボタンを押します。入力フィールド上側に位置情報が表示されます。

ここでは、引き続きこのZ値（ベッドとノズル先端の距離）を補正します。

ベッドの上にコピー用紙を置きます。A4のコピー用紙を４つ切りにして１枚を使用すると扱いやすいかもしれません。フィールドに「G1 Z10 F3500」と入力して「Send」ボタンを押します。３つのキャリッジが下降し、ベッド上方約10mmの位置で停止します。ここで、フィールドに「M114」と入力して「Send」ボタンを押して現在の位置情報を確認します。

画面中央にあるZ方向の操作を行うボタンを使い、少しずつノズルを下げていきます。中央から上側がノズルを上昇させる方向、下側がノズルを下降させる方向に移動させるボタンになります。移動距離は中央から、0.1mm、1mm、10mmとなります。ボタンを押してもノズルが下降しない場合は、Z位置がゼロになっている可能性があります。M114コマンドで確認して下さい。ゼロ点より下降しない設定になっています。

ノズルとコピー用紙が接触し、コピー用紙を引いたり押したりすると適当な抵抗感が感じられるまで下降させます。このZ位置をゼロとして補正します。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-5.webp' | relative_url }}" alt="401-5">
</figure>

<figure>
  <img src="{{ '/assets/images/make3d/401/401-6.webp' | relative_url }}" alt="401-6">
</figure>

<figure>
  <img src="{{ '/assets/images/make3d/401/401-7.webp' | relative_url }}" alt="401-7">
</figure>

M114コマンドでZ位置を確認します。例えば1.5であれば、元々の設定値から1.5を引けば、現在の地点がゼロになります。もし、ノズルが下がり切らずZ位置がゼロになった場合は、設定値を少し大きくしてから、再度行う必要があります。

ここで、「Disconnect」ボタンを押して、Pronterfaceの接続を切ります。この操作を忘れているとArduino Softwareで書き込みエラーとなります。

Arduino Softwareを起動して、Marlin.inoを開きます。Configuration.hを表示させます。456行目の「MANUAL_Z_HOME_POS」の値が現在の設定値ですので、この値を変更します。ファームウェアの書き換えを行ってから再度調整を行います。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-8.webp' | relative_url }}" alt="401-8">
</figure>

Z位置がゼロになるまで下降させた時、ノズルとコピー用紙が接触し、コピー用紙を引いたり押したりすると適当な抵抗が感じられる状態であれば調整完了です。

## ４．フィラメントの設置とノズルからの吐出確認

ここでは、フィラメントを使用して動作確認を行います。

奥側の縦フレーム（Z軸）に固定したスプールホルダーにフィラメントを取り付けます。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-9.webp' | relative_url }}" alt="401-9">
</figure>

フィラメントの先端をエクストルーダーの右側にある穴へ通します。止まるところまで入れます。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-10.webp' | relative_url }}" alt="401-10">
</figure>

エクストルーダーハンドルを時計方向に回します。スプールギアによって、フィラメントが中に通って行くのを確認します。そのままハンドルを回し、ホットエンドにフィラメントが到達するまで回し続けます。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-11.webp' | relative_url }}" alt="401-11">
</figure>

最初に動作確認した要領でホットエンドの温度を200℃に上げます。200℃に達した時、上の写真と同様、ハンドルを時計方向に回します。ノズル先端からフィラメントが出てくることを確認します。

もし、ハンドルが回らない、またはハンドルが空回りし、ノズル先端からフィラメントが出てこない場合は、ホットエンド内で何らかの理由によりフィラメントが引っ掛かっている可能性があります。ホットエンドの温度を下げてから、ホットエンドのチューブフィッティングを外して中の状態を確認します。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-12.webp' | relative_url }}" alt="401-12">
</figure>

最後に、Pronterfaceの画面左下側にある「Extrude」ボタンを押します。エクストルーダーモーターが時計回りに回転すること、それによりフィラメントがノズル先端から押し出されることを確認します。

※「Extrude」ボタン、「Reverse」ボタンは、ホットエンドの温度が設定値より熱くならないと動作しません。

注意：電源を切る（電源を抜く）場合は、ホットエンドの温度が室温近くまで下がっている事を必ず確認して下さい。ホットエンドが高温のまま電源を切ると、ホットエンドファンも切れるため、チューブが溶けてノズルが詰まる場合があります。
{: .notice--warning}

## ５．PID値の調整

ここでは、PID値の調整を行います。

PIDというのはKp、Ki、Kpの３つ値で構成されていて、ホットエンドやヒートベッド（Kossel Mini EBには附属していません）など、ヒーターの制御に影響する値です。この値を最適化することで、目的の温度に素早く到達したり、温度変動を抑えることができます。

詳しくは、[http://reprap.org/wiki/PID_Tuning](http://reprap.org/wiki/PID_Tuning){:target="_blank"}を参照してください。

PronterfaceをKossel Mini EBに接続した状態にします。画面右下のフィールドに「M303 E0 S200 C8」と入力して「Send」ボタンを押します。ホットエンドの温度が上昇し、200℃付近でKp、Ki、Kpの値が５回ほど測定されます。測定値はフィールドの上部に表示されます。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-13.webp' | relative_url }}" alt="401-13">
</figure>

５回測定された、Kp、Ki、Kdの値の平均値を算出します。エクセルなどのスプレッドシートを使用すると簡単です。

「Disconnect」ボタンを押して、Pronterfaceの接続を切ります。Arduino Softwareを起動して、Marlin.inoを開きます。Configuration.hを表示させます。229行目のから231行目までの「DEFAULT_Kp」、「DEFAULT_Ki」、「DEFAULT_Kd」の値を算出した平均値で置き換えます。ファームウェアの書き換えを行えば終了です。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-14.webp' | relative_url }}" alt="401-14">
</figure>

以上の５つの確認・調整が終了すると、マニュアルで使用できる状態になります。（キャリブレーションなしでの）3Dプリントも可能です。さらに、Zプローブを用いたキャリブレーションを行うことで、ベッドの高さや傾きを自動調整できるようになります。

## 【補足】：潤滑油を使ってスムーズにプリントする方法

スポンジに潤滑油を染み込ませてエクストルーダーのフィラメント入り口に設置することを推奨します。以下の効果が期待できます。

1. フィラメントの動きをスムーズにします（造形物のキレイさに影響します）。
1. フィラメントに付着したゴミを取り、ノズルの詰まりを抑えます。

やり方は自由ですが、以下に例を示します。まずは、スポンジ（スポンジたわし等）を適度な大きさに切ります。片側の面を斜めに切り、台形にします。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-15.webp' | relative_url }}" alt="401-15">
</figure>

中心付近までカッターで切り込みを入れます。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-16.webp' | relative_url }}" alt="401-16">
</figure>

「シリコンスプレー」でスポンジの切り込みから中心付近に潤滑油を染み込ませます。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-17.webp' | relative_url }}" alt="401-17">
</figure>

エクストルーダーのフィラメント入り口付近にスポンジを設置します。これにより、フィラメントに付着したゴミが拭き取られ、潤滑油で表面が滑りやすくなります。

<figure>
  <img src="{{ '/assets/images/make3d/401/401-18.webp' | relative_url }}" alt="401-18">
</figure>
